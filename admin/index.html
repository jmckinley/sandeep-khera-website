<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>Blog Admin | Sandeep Khera</title>
</head>
<body>
    <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
    <script>
        CMS.init({
            config: {
                backend: {
                    name: 'github',
                    repo: 'kyliemckinleydemo/sandeep-khera-website',
                    branch: 'main',
                    base_url: 'https://sandeepkhera.vercel.app',
                    auth_endpoint: '/api/auth'
                },
                media_folder: 'images/blog',
                public_folder: '/images/blog',
                collections: [
                    {
                        name: 'blog',
                        label: 'Blog Posts',
                        folder: 'content/blog',
                        create: true,
                        slug: '{{slug}}',
                        extension: 'md',
                        format: 'frontmatter',
                        fields: [
                            { label: 'Title', name: 'title', widget: 'string' },
                            { label: 'Publish Date', name: 'date', widget: 'datetime', date_format: 'YYYY-MM-DD', time_format: false },
                            { label: 'Featured Image', name: 'image', widget: 'image', required: false },
                            { label: 'Summary', name: 'summary', widget: 'text', hint: 'Brief description for blog listing (1-2 sentences)' },
                            { label: 'Author', name: 'author', widget: 'string', default: 'Sandeep Khera' },
                            { label: 'Tags', name: 'tags', widget: 'list', required: false },
                            { label: 'Body', name: 'body', widget: 'markdown' }
                        ]
                    }
                ]
            }
        });

        // Register YouTube embed component
        CMS.registerEditorComponent({
            id: 'youtube',
            label: 'YouTube Video',
            fields: [
                {
                    name: 'id',
                    label: 'YouTube Video ID',
                    widget: 'string',
                    hint: 'Enter the video ID (e.g., dQw4w9WgXcQ from youtube.com/watch?v=dQw4w9WgXcQ)'
                }
            ],
            pattern: /^{{< youtube (\S+) >}}$/,
            fromBlock: function(match) {
                return { id: match[1] };
            },
            toBlock: function(obj) {
                return '{{< youtube ' + obj.id + ' >}}';
            },
            toPreview: function(obj) {
                return '<div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="https://www.youtube.com/embed/' + obj.id + '" frameborder="0" allowfullscreen></iframe></div>';
            }
        });
    </script>
</body>
</html>
